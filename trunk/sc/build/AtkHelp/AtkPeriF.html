<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.25">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; min-height: 22.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #e00000}
span.s1 {font: 18.0px Helvetica}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>AtkPeriF<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>Ambisonic Tool Kit B-format Periphonic Farfield Decode</b></p>
<p class="p2"><b></b><br></p>
<p class="p3"><br></p>
<p class="p4"><b>AtkPeriF.ar(w, x, y, numChans, orientation, elevation, directivity)</b></p>
<p class="p3"><br></p>
<p class="p4">Decode a three dimensional ambisonic B-format signal to a set of speakers in a set of two regular polygons, the first elevated above the second. The "farfield" decode is preferred for large scale and concert hall decoding.</p>
<p class="p3"><br></p>
<p class="p4">The outputs will be in counter-clockwise order. [Note: counter-clockwise numbering of loudspeakers is the ambisonic convention, but is different from SC3's included ambisonic decoder, <b>DecodeB2</b>.] The position of the first speaker is either center up or left of center up. The first half of the output is the upper polygon and the second half is the lower polygon.</p>
<p class="p3"><br></p>
<p class="p4"><b>numChans</b> - number of output speakers. Typically 8 to 16.</p>
<p class="p4"><b>w, x, y, z</b> - the B-format signals. </p>
<p class="p4"><b>orientation</b> - 0 or 1, Should be 1 if the front is a vertex of the polygon. The first speaker will be directly in front. Should be 0 if the front bisects a side of the polygon. Then the first speaker will be the one left of center. Default is 0.</p>
<p class="p4"><b>elevation</b> - Adjusts the angle of elevation for the height of the decoding array. Default 0.6155 (2.sqrt.reciprocal.arctan).</p>
<p class="p4"><b>directivity</b> - The weighting of the ambisonic decoding equations. Varies between -1 for idealized, strict soundfield decoding to +1 for controlled opposites, in-phase decoding. A value of 0 will give optimized energy decoding. Defaults to +1. Controlled opposites is the option preferred for acoustically live spaces.</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p5">//(</p>
<p class="p5">//{</p>
<p class="p5">//<span class="Apple-tab-span">	</span>var w, x, y, p, a, b, c, d;</p>
<p class="p5">//<span class="Apple-tab-span">	</span></p>
<p class="p5">//<span class="Apple-tab-span">	</span>p = PinkNoise.ar; // source</p>
<p class="p5">//<span class="Apple-tab-span">	</span></p>
<p class="p5">//<span class="Apple-tab-span">	</span>// B-format encode</p>
<p class="p5">//<span class="Apple-tab-span">	</span>#w, x, y = PanB2.ar(p, MouseX.kr(-1,1), 0.1);<span class="Apple-converted-space"> </span></p>
<p class="p5">//<span class="Apple-tab-span">	</span></p>
<p class="p5">//<span class="Apple-tab-span">	</span>// B-format decode to quad</p>
<p class="p5">//<span class="Apple-tab-span">	</span>#a, b, c, d = DecodeB2.ar(4, w, x, y);</p>
<p class="p5">//<span class="Apple-tab-span">	</span></p>
<p class="p5">//<span class="Apple-tab-span">	</span>[a, b, d, c] // reorder to my speaker arrangement: Lf Rf Lr Rr</p>
<p class="p5">//}.play;</p>
<p class="p5">//)</p>
</body>
</html>
